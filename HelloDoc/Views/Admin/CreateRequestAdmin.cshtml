@*when admin click on the create request on dashboard page *@

@{
    Layout = "header_dashboard";
}

@model HelloDoc.ViewModels.PatientInfo;

<div class="container mt-3">

    <div class="d-flex justify-content-between mt-2">
        <div class="d-flex">
            <h3>Submit Information</h3>
        </div>

        <div>
            <!-- <a href="../submitrequest.html"
                class="d-flex text-decoration-none align-items-center border border-0 bg-transparent"> -->
            <!-- <div class="d-flex">
                <img class="back" src="../images/back.png" alt="">
            </div> -->
            <a asp-controller="Admin" asp-action="Admindashboard" class="text-decoration-none">
                <span class="back-btn small" style="color: #00b8e6;">&lt;Back</span>
            </a>
            <!-- </a> -->
        </div>
    </div>

    <div class="border border-0 shadow rounded-1 px-3 py-2 mt-2 mb-5" id="content-color">
        <h6>Patient Information</h6>
        <form asp-controller="CreatePatient" asp-action="patient" method="post" enctype="multipart/form-data">
            <div class="mt-3 d-flex row">
                <div class="p-2 col-xl-12">
                    <div class="form-floating">
                        <div class="form-floating">
                            <textarea asp-for="Symptoms" class="form-control shadow-none"
                                      placeholder="Enter Brief Details Of Symptomps(Optional)"
                                      style="height: 100px"></textarea>
                            <label for="floatingTextarea2">Enter Brief Details Of Symptomps(Optional)</label>
                            <span asp-validation-for="Symptoms" class="text-danger small"></span>

                        </div>
                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        <input type="text" asp-for="FirstName" class="form-control shadow-none" placeholder="First Name">
                        <label class="FloatingInput" for="Name">First Name</label>
                        <span asp-validation-for="FirstName" class="text-danger small"></span>
                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        <input type="text" asp-for="LastName" class="form-control shadow-none" placeholder="Last Name">
                        <label class="FloatingInput" for="Name">Last Name</label>
                        <span asp-validation-for="LastName" class="text-danger small"></span>
                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        @{
                            string max = DateTime.Now.ToString("yyyy-MM-dd");
                        }
                        <input type="date" asp-for="DOB" class="form-control shadow-none"
                               placeholder="Date Of Birth" max="@max">
                        <label class="FloatingInput" for="Name">Date Of Birth</label>
                        <span asp-validation-for="DOB" class="text-danger small"></span>

                    </div>
                </div>

                <h6 class="mt-3">Patient Contact Information</h6>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6 mt-2">
                    <div class="form-floating ">
                        <input type="email" asp-for="Email" class="form-control shadow-none" placeholder="Email" id="patientEmail" onblur="checkEmailExists()">
                        <label class="FloatingInput" for="Name">Email</label>
                        <span asp-validation-for="Email" class="text-danger small"></span>

                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6 mt-2">
                    <div class="telephone rounded form-floating">
                        <div class="input-group d-flex align-items-center rounded ">
                            <input type="tel" asp-for="PhoneNumber" id="tel" class="form-control" placeholder="">
                        </div>
                    </div>
                    <span asp-validation-for="PhoneNumber" class="text-danger small"></span>

                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6" id="passwordFields1">
                    <div class="form-floating ">
                        <input type="password" asp-for="Password" id="pswd" class="form-control shadow-none " placeholder="Password">
                        <label class="FloatingInput" for="Name">Password</label>
                        <span asp-validation-for="Password" class="text-danger small"></span>

                        <div style="top: 28%; position: absolute; right: 3%;" onclick="hideviewpswd()">
                            <i class="bi bi-eye-fill" role="button" id="eye-icon"></i>
                        </div>
                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6" id="passwordFields2">
                    <div class="form-floating ">
                        <input type="password" asp-for="ConfirmPassword" class="form-control shadow-none" id="pswd-1" placeholder="Password">
                        <label class="FloatingInput" for="Name">Confirm Password</label>
                        <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>


                        <div style="top: 28%; position: absolute; right: 3%;" onclick="hideviewpswd1()">
                            <i class="bi bi-eye-fill" role="button" id="eye-icon-1"></i>
                        </div>
                    </div>
                </div>


                <h6 class="mt-3">Patient Location</h6>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6 mt-2">
                    <div class="form-floating ">
                        <input type="text" asp-for="Street" class="form-control shadow-none " placeholder="Street">
                        <label class="FloatingInput" for="Name">Street</label>
                        <span asp-validation-for="Street" class="text-danger small"></span>

                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6 mt-2">
                    <div class="form-floating ">
                        <input type="text" asp-for="City" class="form-control shadow-none " placeholder="City">
                        <label class="FloatingInput" for="Name">City</label>
                        <span asp-validation-for="City" class="text-danger small"></span>

                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        <input type="text" asp-for="State" class="form-control shadow-none " placeholder="State">
                        <label class="FloatingInput" for="Name">State</label>
                        <span asp-validation-for="State" class="text-danger small"></span>

                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        <input type="text" asp-for="ZipCode" class="form-control shadow-none " placeholder="Zip Code">
                        <label class="FloatingInput" for="Name">Zip Code</label>
                        <span asp-validation-for="ZipCode" class="text-danger small"></span>

                    </div>
                </div>

                <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                    <div class="form-floating ">
                        <input type="text" asp-for="Room" class="form-control shadow-none "
                               placeholder="Room # / Suite (Optional)">
                        <label class="FloatingInput" for="Name">Room # / Suite (Optional)</label>
                        <span asp-validation-for="Room" class="text-danger small"></span>

                    </div>
                </div>

                <h6 class="mt-3">(Optional) Upload Photo or Document</h6>

                <div class="mt-1">
                    <div class="row d-flex">
                        <div class="p-2 col-12 ">
                            <div class="form-group rounded d-flex align-items-center justify-content-between uploadbtndiv">
                                <div class="px-3">
                                    @*<label class="choosenfile text-dark small" id="file-chosen">No item selected</label>*@
                                    <input type="text" style="width:60vw;" id="file-chosen" class="border border-0" placeholder="No item selected" disabled />
                                </div>
                                <div role="button" class="uploadbtn p-2 d-flex">
                                    <input type="file" asp-for="Upload" id="actual-btn" hidden multiple />
                                    <label role="button" for="actual-btn" class="d-flex align-items-center">
                                        <i class="bi bi-cloud-arrow-up p-2"></i><div>Upload</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="justify-content-end d-flex">
                    <div class="mx-3">
                        <button type="submit" class="border border-0 text-white sub rounded-2 px-3 py-2 small">
                            Submit
                        </button>
                    </div>
                    <div>
                        <button type="reset" class="can rounded-2 px-3 py-2 small bg-white">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </form>

    </div>
</div>

<div class="fixed-bottom navbar bg-dark d-flex justify-content-end" id="terms">
    <div class="d-flex text-light fw-normal small p-2 mx-3 footer">
        <span>Terms of Conditions &nbsp;</span><span>|</span><span>&nbsp;&nbsp;Privacy Policy</span>
    </div>
</div>


<script>
    swal("Information",
        "When Submitting the request, you must provide the correct contact information for the patient or responsibly party.Failure to provide the correct email and phone number will delay the service or be declined.",
        "warning", {
        closeOnClickOutside: true,
    });


    function checkEmailExists() {

        var email = document.getElementById("patientEmail").value;

        fetch('/CreatePatient/patient/checkmail/' + email)
            .then(response => response.json())
            .then(data => {
                var patientPassword = document.getElementById('passwordFields1');
                var patientConfirmPassword = document.getElementById('passwordFields2');

                if (data.exists) {
                    patientPassword.style.display = 'none';
                    patientConfirmPassword.style.display = 'none';
                    console.log("exist ")
                }
                else {
                    patientPassword.style.display = 'block';
                    patientConfirmPassword.style.display = 'block';
                    console.log(" not exist ")

                }
            })
            .catch(error => console.error('Error:', error));
    }


    const eyeicon = document.getElementById('eye-icon')
    const password = document.getElementById('pswd')


    function hideviewpswd() {
        if (password.type === "password") {
            eyeicon.classList.replace('bi-eye-fill', 'bi-eye-slash-fill')
            password.type = "text"
        }
        else {
            eyeicon.classList.replace('bi-eye-slash-fill', 'bi-eye-fill')
            password.type = "password"

        }

    }

    const eyeicon1 = document.getElementById('eye-icon-1')
    const password1 = document.getElementById('pswd-1')
    function hideviewpswd1() {
        if (password1.type === "password") {
            eyeicon1.classList.replace('bi-eye-fill', 'bi-eye-slash-fill')
            password1.type = "text"
        }
        else {
            eyeicon1.classList.replace('bi-eye-slash-fill', 'bi-eye-fill')
            password1.type = "password"

        }

    }
</script>



