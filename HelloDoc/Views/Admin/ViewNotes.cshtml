@model Services.Viewmodels.AdminDashboardViewModel;

@{
    Layout = null;
}

<div class="tab-content" id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">

        <div class="container mt-3 px-xl-5">
            <div class="px-xl-5 mx-xl-5">
                <div class="d-flex justify-content-between align-items-center mt-2">
                    <div class="d-flex">

                        <h4>Notes</h4>

                    </div>

                    <div>
                        <a asp-controller="Admin" asp-action="Admindashboard" class="text-decoration-none">
                            <span class="back-btn p-2" style="color: #00b8e6;">&lt;Back</span>
                        </a>
                    </div>
                </div>

                <div class="row d-flex mt-3 px-2">
                    @if (Model.physicianname != null)
                    {

                        <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                            <div class="px-3 py-3 bg-white rounded-3 shadow">
                                <div class="d-flex flex-row">
                                    <div class="d-flex mt-2">
                                        <i class="fa-solid fa-right-left"></i>
                                    </div>

                                    <div class="d-flex flex-column ms-3">
                                        <h6>Transfer Notes</h6>

                                        <small class="text-secondary">@Model.adminname Transferred to @Model.physicianname on @Model.assignTime.ToString("dd/MM/yyyy") at @Model.assignTime.ToString("hh:mm tt")</small>
                                    </div>
                                </div>
                            </div>


                        </div>


                    }

                    <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">
                        <div class="px-3 py-3 bg-white rounded-3 shadow">
                            <div class="d-flex flex-row">
                                <div class="d-flex mt-2">
                                    <i class="fa-solid fa-user-doctor"></i>

                                </div>

                                <div class="d-flex flex-column ms-3">
                                    <h6>Physician Notes</h6>
                                    <small class="text-secondary">test add, concluded </small>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="p-2 col-xl-6 col-lg-6 col-md-6 col-sm-6">

                        <div class="px-3 py-3 bg-white rounded-3 shadow">
                            <div class="d-flex flex-row">
                                <div class="d-flex mt-2">
                                    <i class="fa-solid fa-user-tie"></i>


                                </div>

                                <div class="d-flex flex-column ms-3">
                                    <h6>Admin Notes</h6>
                                    <small id="adminNote">@Model.blocknotes</small>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="p-2">
                        <form>
                            <div class="px-3 py-3 bg-white rounded-3 shadow">
                                <div class="mt-2">
                                    <div class="form-floating">
                                        <textarea asp-for="blocknotes" name="" class="form-control shadow-none" placeholder="Patient Notes" style="height: 150px" id="note"></textarea>
                                        <label for="note"><span class="bg-white">Admin Notes</span></label>
                                        <input type="number" asp-for="requestid" id="reqid" value="@Model.requestid" hidden/>
                                    </div>

                                    <div class="d-flex justify-content-end">
                                        <button id="updatenotes" type="button" class="btn btn-info shadow-none text-white rounded-2 mt-4 px-2 py-2">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>

            </div>



        </div>
    </div>

    <div class="tab-pane fade" id="nav-provider-location" role="tabpanel" aria-labelledby="nav-provider-location-tab">
        2
    </div>

    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
        3
    </div>

    <div class="tab-pane fade" id="nav-provider" role="tabpanel" aria-labelledby="nav-provider-tab">
        4
    </div>

    <div class="tab-pane fade" id="nav-partner" role="tabpanel" aria-labelledby="nav-partner-tab">
        5
    </div>

    <div class="tab-pane fade" id="nav-access" role="tabpanel" aria-labelledby="nav-access-tab">
        6
    </div>

    <div class="tab-pane fade" id="nav-record" role="tabpanel" aria-labelledby="nav-record-tab">
        7
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#updatenotes').click(function () {
            console.log("hello notes")
            var notes = $('#note').val();
            var requestid = $('#reqid').attr('value');
            var model = {
                requestid: requestid,
                blocknotes: notes
            }
            console.log(model)
            $.ajax({
                url: '/Admin/ViewNotes',
                type: 'POST',
                dataType: 'json',
                data: model,
                success: function (response) {

                },
                error: function (xhr, status, error) {
                    console.error(error);
                }
            });
            $('#adminNote').html(notes)
        });

        $('#editButton').click(function () {
            // Remove disabled attribute to make inputs editable
            // $('#name').prop('disabled', false);
            // $('#age').prop('disabled', false);
            $('.disable').removeAttr('disabled', false);


            $('select').removeAttr('disabled', false);
            $(this).hide();
            $('#savebtn').removeAttr('hidden', false);
            // Hide the edit button after clicking it

        });



    });
</script>